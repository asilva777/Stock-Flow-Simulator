<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stockâ€“Flow Simulator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="guide">
    <strong>ðŸ§® Quick Guide: Using the Stock and Flow Simulator</strong>
    <ul>
      <li><b>Purpose:</b> See how your LGUâ€™s reserves (stock) change over time, based on decisions about income (<b>inflows</b>) and spending (<b>outflows</b>).</li>
      <li><b>Step 1:</b> Adjust policy levers below (tax collection, annual spending, shocks).</li>
      <li><b>Step 2:</b> Observe how reserves change. Try different scenarios!</li>
    </ul>
  </div>

  <h1>Stockâ€“Flow Simulator</h1>
  <div class="container">
    <div id="tooltip" class="tooltip"></div>
    <svg viewBox="0 0 800 300">
      <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
          <polygon points="0 0,10 3.5,0 7" fill="#27ae60"/>
        </marker>
      </defs>

      <!-- Stocks -->
      <rect class="stock" x="320" y="120" width="160" height="60" rx="10" ry="10" />
      <text class="label" x="400" y="145" id="stockLabel">LGU Reserves</text>
      <text class="label" x="400" y="170" id="stockValue">100.0</text>

      <!-- Inflow path -->
      <line class="flow-arrow" x1="50" y1="150" x2="320" y2="150" data-tooltip="Income (Taxes, IRA, etc.) â†‘" />
      <text class="label" x="185" y="140" id="inflowLabel">Income: 5.0</text>

      <!-- Outflow path -->
      <line class="flow-arrow" x1="480" y1="150" x2="750" y2="150" data-tooltip="Spending (Salaries, Projects, etc.) â†“" />
      <text class="label" x="615" y="140" id="outflowLabel">Spending: 3.0</text>
    </svg>

    <div class="controls">
      <div class="control">
        <label for="inflowSlider">Base Income (â‚±M)</label>
        <input type="range" id="inflowSlider" min="1" max="20" value="5">
        <span class="control-value" id="inflowValue">5</span>
      </div>
      <div class="control">
        <label for="outflowSlider">Base Spending (â‚±M)</label>
        <input type="range" id="outflowSlider" min="1" max="20" value="3">
        <span class="control-value" id="outflowValue">3</span>
      </div>
      <div class="control">
        <label for="collectionSlider">Tax Collection Rate (%)</label>
        <input type="range" id="collectionSlider" min="50" max="120" value="100">
        <span class="control-value" id="collectionValue">100</span>
      </div>
      <div class="control">
        <label for="spendGrowthSlider">Annual Spending Growth (%)</label>
        <input type="range" id="spendGrowthSlider" min="-10" max="20" value="0">
        <span class="control-value" id="spendGrowthValue">0</span>
      </div>
      <div class="control">
        <label for="shockInput">One-Time Shock (â‚±M)</label>
        <input type="number" id="shockInput" min="0" value="0" style="width:80px;">
        <button id="applyShock">Apply</button>
      </div>
    </div>

    <div class="readout">Current LGU Reserves: <span id="readoutStock">100.0</span> â‚±M</div>
    <div class="scenario-section">
      <strong>ðŸ§ª Try Scenarios:</strong>
      <div class="scenario-buttons">
        <button onclick="window.simScenario('improveCollection')">Improve Collection by +10%</button>
        <button onclick="window.simScenario('iraCut')">IRA Cut (Income -20%)</button>
        <button onclick="window.simScenario('spendGrowth')">Spending grows +10%</button>
        <button onclick="window.simScenario('disasterShock')">Apply Disaster Shock (â‚±50M)</button>
      </div>
    </div>
    <div class="explore-note">
      <p>ðŸ”Ž <b>Explore:</b> Try small and large changes, and see how your reserves react. Notice any delays or sensitivities to your policy levers?</p>
    </div>
  </div>
  <script src="script.js"></script>
</body>
</html>
